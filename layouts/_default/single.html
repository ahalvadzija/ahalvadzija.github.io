{{ define "main" }}
<div id="scroll-progress-container" class="fixed top-0 left-0 w-full h-1 z-50 bg-transparent">
  <div id="scroll-progress-bar" class="h-full bg-stei-blue w-0 transition-all duration-75 ease-out"></div>
</div>

<article class="max-w-full mx-auto">
  <header class="mb-10 space-y-1">
<h1 class="text-2xl md:text-3xl font-extrabold tracking-tighter leading-tight text-[var(--text)]">
      {{ .Title }}
    </h1>

<div class="flex items-center gap-5 mt-2">
  <div class="flex items-center gap-2 text-[var(--muted)]">
    {{ partial "icon.html" (dict "name" "calendar" "class" "w-4 h-4 stroke-[1.5]") }}
    <time class="text-sm font-mono tracking-tight italic">
      {{ .Date.Format "02 Jan, 2006" }}
    </time>
  </div>

  <span class="text-[var(--muted)] opacity-20 text-xs">â€¢</span>

  <div class="flex items-center gap-2 text-[var(--muted)]">
    {{ partial "icon.html" (dict "name" "clock" "class" "w-4 h-4 stroke-[1.5]") }}
    <span class="text-sm font-mono tracking-tight">
      {{ .ReadingTime }} min read
    </span>
  </div>
</div>
  </header>

<div class="prose prose-sm max-w-none 
            text-[15px] leading-relaxed text-[var(--text)] 
            
            prose-headings:text-[var(--text)] 
            prose-p:text-[var(--text)] 
            prose-strong:text-[var(--text)]
            prose-li:text-[var(--text)]
            prose-ol:text-[var(--text)]
            
            prose-headings:font-bold prose-headings:tracking-tight 
            prose-a:text-stei-blue prose-a:no-underline hover:prose-a:underline 
            
            prose-code:text-[14px] prose-code:text-stei-blue prose-code:font-mono prose-code:before:content-none prose-code:after:content-none
            prose-pre:text-[14px]
            prose-pre:border prose-pre:border-[var(--border)] prose-pre:bg-[var(--bg)]" 
     data-pagefind-body>
  {{ .Content }}
</div>
  <div class="mt-1 py-8">
    {{ partial "newsletter.html" . }}
  </div>

<div class="flex flex-wrap gap-x-4 gap-y-2 mb-7 mt-8 font-mono" data-pagefind-filter="tag">
  {{ range .Params.tags }}
    {{ $name := . }}
    {{ with $.Site.GetPage (printf "/tags/%s" ($name | urlize)) }}
    <a href="{{ .RelPermalink }}" 
       class="group flex items-center text-sm font-mono tracking-tight text-[var(--muted)] hover:text-stei-blue transition-colors duration-200">
      <span class="text-stei-blue/40 group-hover:text-stei-blue transition-colors mr-1 font-bold">#</span>
      <span class="tracking-widest">{{ $name }}</span>
    </a>
    {{ end }}
  {{ end }}
</div>

  <div class="mt-3">
    <div class="flex flex-col md:flex-row md:items-center justify-between gap-8">
<div class="flex flex-col items-center md:items-start gap-4">
      <h5 class="flex items-center gap-2 text-sm font-mono tracking-[0.15em] text-[var(--muted)]">
    Share this post
  </h5>
      <div class="flex flex-wrap justify-center md:justify-start gap-5">
        {{ $url := .Permalink }}
        {{ $title := .Title }}
        {{ range (slice 
          (dict "name" "x" "url" (printf "https://twitter.com/intent/tweet?url=%s&text=%s" $url $title))
          (dict "name" "linkedin" "url" (printf "https://www.linkedin.com/sharing/share-offsite/?url=%s" $url))
          (dict "name" "reddit" "url" (printf "https://reddit.com/submit?url=%s&title=%s" $url $title))
        ) }}
          <a href="{{ .url }}" target="_blank" rel="noopener" 
             class="text-[var(--muted)] hover:text-stei-blue active:scale-90 transition-all duration-200">
            {{ partial "icon.html" (dict "name" .name "class" "w-5 h-5") }}
          </a>
        {{ end }}
      </div>
    </div>

<button 
  onclick="window.scrollTo({ top: 0, behavior: 'smooth' })" 
  class="group flex items-center justify-center gap-2 text-sm font-mono tracking-[0.15em] text-[var(--muted)] hover:text-stei-blue transition-all cursor-pointer mx-auto md:mx-0"
>
  <span class="text-stei-blue font-bold">^</span>
  
  <span class="border-b border-transparent group-hover:border-stei-blue/30 transition-all">
    Return to top
  </span>
</button>
  </div>
    </div>

<nav class="grid grid-cols-1 md:grid-cols-2 gap-10 pt-8">
  <div class="flex flex-col gap-2">
    {{ with .PrevInSection }}
    <h5 class="flex items-center gap-2 text-sm font-mono tracking-[0.15em] text-[var(--muted)]">
      <span class="text-stei-blue font-bold"><--</span>
      Previous Post
    </h5>
    <a href="{{ .RelPermalink }}" class="text-base text-[var(--text)] hover:text-stei-blue transition-all group">
      <span class="line-clamp-2 leading-snug">{{ .Title }}</span>
    </a>
    {{ end }}
  </div>

  <div class="flex flex-col md:items-end md:text-right gap-2">
    {{ with .NextInSection }}
    <h5 class="flex items-center md:flex-row-reverse gap-2 text-sm font-mono tracking-[0.15em] text-[var(--muted)]">
      <span class="text-stei-blue font-bold">--></span>
      Next Post
    </h5>
    <a href="{{ .RelPermalink }}" class="text-base text-[var(--text)] hover:text-stei-blue transition-all group">
      <span class="line-clamp-2 leading-snug">{{ .Title }}</span>
    </a>
    {{ end }}
  </div>
</nav>
  </div>
</article>
{{ end }}